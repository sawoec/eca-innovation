<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Document Viewer</title>
    <meta name="description" content="A clean, responsive viewer for an image or PDF hosted on GitHub Pages." />
    <meta property="og:title" content="Document Viewer" />
    <meta property="og:description" content="A clean, responsive viewer for an image or PDF hosted on GitHub Pages." />
    <meta property="og:type" content="website" />
    <meta name="theme-color" content="#0ea5e9" />
    <style>
        :root {
            --bg: #0b1020;
            --panel: #0f172a;
            --text: #e5e7eb;
            --muted: #9ca3af;
            --accent: #22d3ee;
            --ring: rgba(34, 211, 238, 0.4);
        }

        * {
            box-sizing: border-box;
        }

        html,
        body {
            height: 100%;
        }

        body {
            margin: 0;
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
            color: var(--text);
            background: radial-gradient(1200px 800px at 10% 10%, #0c1b3a 0%, var(--bg) 60%);
            background-attachment: fixed;
            display: grid;
            place-items: center;
            padding: 24px;
        }

        .card {
            width: min(1100px, 100%);
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0.02));
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.45);
            overflow: hidden;
            backdrop-filter: blur(8px);
        }

        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            padding: 14px 16px;
            background: rgba(255, 255, 255, 0.03);
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }

        .title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            letter-spacing: 0.2px;
        }

        .title .dot {
            width: 10px;
            height: 10px;
            border-radius: 999px;
            background: var(--accent);
            box-shadow: 0 0 18px var(--accent);
        }

        .actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        button,
        a.button {
            appearance: none;
            border: 1px solid rgba(255, 255, 255, 0.14);
            background: rgba(255, 255, 255, 0.06);
            color: var(--text);
            padding: 8px 12px;
            border-radius: 12px;
            cursor: pointer;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            line-height: 1;
        }

        button:hover,
        a.button:hover {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--ring) inset;
        }

        main {
            padding: 0;
            background: #0b1227;
        }

        .stage {
            position: relative;
            width: 100%;
            height: min(78vh, 900px);
            display: grid;
            place-items: center;
            overflow: auto;
            background:
                radial-gradient(800px 400px at 90% -10%, rgba(34, 211, 238, 0.08), transparent 60%),
                radial-gradient(900px 500px at -20% 110%, rgba(99, 102, 241, 0.08), transparent 60%),
                #0b1227;
        }

        .viewer {
            max-width: 100%;
            max-height: 100%;
            border: none;
            border-radius: 12px;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
            transition: transform 0.2s ease;
        }

        .fit-contain img,
        .fit-contain object,
        .fit-contain iframe {
            object-fit: contain;
        }

        .hidden {
            display: none;
        }

        footer {
            padding: 14px 16px;
            font-size: 13px;
            color: var(--muted);
            display: flex;
            justify-content: space-between;
            gap: 12px;
        }

        .mono {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }

        .notice {
            color: #a7f3d0;
        }

        .kbd {
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 2px 6px;
            border-radius: 6px;
            font-size: 12px;
        }
    </style>
</head>

<body>
    <div class="card">
        <header>
            <div class="title">
                <span class="dot" aria-hidden="true"></span>
                <span>Simple Viewer</span>
                <span id="fileKind" class="mono" style="opacity:.7"></span>
            </div>
            <div class="actions">
                <button id="fitBtn" title="Toggle fit (F)">Fit: <span id="fitMode">Contain</span></button>
                <a id="openRaw" class="button" href="#" target="_blank" rel="noopener">Open Raw</a>
                <a id="downloadBtn" class="button" href="#" download>Download</a>
            </div>
        </header>

        <main>
            <div id="stage" class="stage fit-contain">
                <!-- Image element -->
                <img id="imgEl" class="viewer hidden" alt="Document preview" loading="lazy" />

                <!-- PDF element (object for broader support) -->
                <object id="pdfEl" class="viewer hidden" type="application/pdf" data="#">
                    <p style="padding:16px; text-align:center">Your browser cannot display PDFs inline. <a
                            id="pdfFallback" href="#" target="_blank" rel="noopener">Open the file</a>.</p>
                </object>
            </div>
        </main>

        <footer>
            <div>
                Drop your file in <span class="mono">/assets/</span> and set <span class="mono">FILE_URL</span> below.
                <span class="notice">Supports JPG, PNG, GIF, SVG, and PDF.</span>
            </div>
            <div>
                Shortcuts: <span class="kbd">F</span> Fit â€¢ <span class="kbd">R</span> Reset zoom (images)
            </div>
        </footer>
    </div>

    <script>
        // ======= CONFIG =======
        // Put your file path here. Example: 'assets/my-image.jpg' or 'assets/my-doc.pdf'
        // You can also pass ?file=assets/other.pdf to override via the URL.
        const DEFAULT_FILE = 'assets/Affiche_eca_innovation_week.png';
        // =======================

        const qs = new URLSearchParams(location.search);
        const FILE_URL = qs.get('file') || DEFAULT_FILE;
        const imgEl = document.getElementById('imgEl');
        const pdfEl = document.getElementById('pdfEl');
        const stage = document.getElementById('stage');
        const fitBtn = document.getElementById('fitBtn');
        const fitModeSpan = document.getElementById('fitMode');
        const downloadBtn = document.getElementById('downloadBtn');
        const openRaw = document.getElementById('openRaw');
        const fileKind = document.getElementById('fileKind');
        const pdfFallback = document.getElementById('pdfFallback');

        function ext(url) {
            const q = url.split('?')[0].split('#')[0];
            const i = q.lastIndexOf('.');
            return i >= 0 ? q.slice(i + 1).toLowerCase() : '';
        }

        function isPdf(url) { return ext(url) === 'pdf'; }
        function isImage(url) { return ['jpg', 'jpeg', 'png', 'gif', 'webp', 'svg', 'avif'].includes(ext(url)); }

        function show(el) { el.classList.remove('hidden'); }
        function hide(el) { el.classList.add('hidden'); }

        function setFitMode(contain = true) {
            if (contain) {
                stage.classList.add('fit-contain');
                fitModeSpan.textContent = 'Contain';
            } else {
                stage.classList.remove('fit-contain');
                fitModeSpan.textContent = 'Actual';
            }
        }

        // Simple zoom for images with wheel + Ctrl (or pinch on trackpads)
        let scale = 1;
        function resetZoom() {
            scale = 1; imgEl.style.transform = 'scale(1)';
        }

        stage.addEventListener('wheel', (e) => {
            if (imgEl.classList.contains('hidden')) return;
            if (!e.ctrlKey) return; // mimic browser behavior: ctrl+wheel to zoom
            e.preventDefault();
            const delta = Math.sign(e.deltaY) * -0.1;
            scale = Math.min(8, Math.max(0.25, scale + delta));
            imgEl.style.transform = `scale(${scale.toFixed(3)})`;
        }, { passive: false });

        window.addEventListener('keydown', (e) => {
            if (e.key.toLowerCase() === 'f') { setFitMode(!stage.classList.contains('fit-contain')); }
            if (e.key.toLowerCase() === 'r') { resetZoom(); }
        });

        fitBtn.addEventListener('click', () => setFitMode(!stage.classList.contains('fit-contain')));

        // Init viewer
        (function init() {
            openRaw.href = FILE_URL;
            downloadBtn.href = FILE_URL;
            downloadBtn.download = FILE_URL.split('/').pop() || 'file';
            pdfFallback.href = FILE_URL;

            if (isPdf(FILE_URL)) {
                fileKind.textContent = '(PDF)';
                hide(imgEl); show(pdfEl);
                pdfEl.data = FILE_URL;
            } else if (isImage(FILE_URL)) {
                fileKind.textContent = '(' + ext(FILE_URL).toUpperCase() + ' image)';
                hide(pdfEl); show(imgEl);
                imgEl.src = FILE_URL;
            } else {
                fileKind.textContent = '(unknown)';
                hide(pdfEl); show(imgEl);
                imgEl.alt = 'Unsupported file type. Please use an image or PDF.';
            }

            setFitMode(true);
        })();
    </script>
</body>

</html>